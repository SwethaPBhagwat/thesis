\acresetall

In order to observe the optical spring effect and actually measure it and
characterize it we have set up the experiment as described in chapter
\ref{ch:lintrapex}.
The measurement that we take is the open loop transfer function of the servo.
This is accomplished at the electronic servo board itself as shown in figure
\ref{fig:results:servoloop}.


\begin{figure}
\tikzsetnextfilename{results_servoloop}
\centering
\begin{tikzpicture}
  [block/.style={rectangle,draw=black,very thick,align=center,
                  outer sep=0,minimum size=1cm,align=left},
   oscillator/.style={circle,draw=black,very thick,align=center,
                  outer sep=0,minimum size=1cm},
   digital/.style={rectangle,draw=black!50,fill=black!20,thick,align=center,
                   outer sep=0,minimum size=1cm,text width=0.9cm},
   physical/.style={rectangle,draw=green!50,fill=green!20,thick,align=center,
                    outer sep=0,minimum size=1cm,text width=0.9cm},
   spring/.style={rectangle,draw=red!50,fill=red!20,thick,align=center,
                   outer sep=0,minimum size=1cm,text width=0.9cm}]
  \node[circle,inner sep=0,draw,very thick] (sum) at (0,0) {+};
  \node[oscillator] (sumOS) at (-3,4) {};
  \draw[very thick] (-3.4,4) -- (-2.6,4);
  \draw[very thick] (-3,3.6) -- (-3,4.4);
  \node[block] (optspr) at (-5,4) {$K_{OS}$};
  \node[block] (mass) at (-3,6) {$\frac{1}{m\omega^2}$};
  \node[circle,outer sep=0,inner sep=0,fill=black,minimum size=0.2cm] (outa) at (-1.5,0) {};
  \node[circle,outer sep=0,inner sep=0,fill=black,minimum size=0.2cm] (outb) at (1.5,0) {};
  \node (outat) at (-1.5,-1) {out A};
  \node (outbt) at (1.5,-1) {out B};
  \node (int) at (0,-1) {in};
  \node[block] (filt1) at (3,0) {};
  \node[block] (actuation) at (5,2) {Actuation};
  \draw[very thick] (2.6,0.25) -- (2.9,0.25) -- (3.4,-0.25);
%  \node[oscillator] (mixer1) at (-3,0) {};
%  \draw[very thick] (-3,0) -- ++(45:0.5);
%  \draw[very thick] (-3,0) -- ++(135:0.5);
%  \draw[very thick] (-3,0) -- ++(225:0.5);
%  \draw[very thick] (-3,0) -- ++(315:0.5);
  \draw[very thick,->] (outa) -- (sum);
  \draw[very thick] (sum) -- (outb);
  \draw[very thick,->] (outa) -- (outat);
  \draw[very thick,->] (outb) -- (outbt);
  \draw[very thick,->] (int) -- (sum);
  \draw[very thick] (sumOS) |- (outa);
  \draw[very thick] (outb) -- (filt1);
  \draw[very thick] (filt1) -| (actuation);
  \draw[very thick,->] (actuation) |- (sumOS);
  \draw[very thick] (sumOS) -- (optspr);
  \draw[very thick] (optspr) |- (mass);
  \draw[very thick,->] (mass) -- (sumOS);
  \draw[very thick] (outat.north west) -- (outat.north east);
  \draw[very thick] (outbt.north west) -- (outbt.north east);
  \draw[very thick] (int.north west) -- (int.north east);
\end{tikzpicture}
\caption[Open Loop Gain Measurement]{This is a simplified schematic showing how
  we measure the optical spring.
  While the loop is closed, we can inject a sine wave of a specific frequency
  at "in", then measure the amplitude and phase shift of this sine wave at the
  points, outA and outB, giving us the complex numbers $A$ and $B$.
  The open loop gain at each point is then given by $A/B$
  The transfer function is then constructed out of many of these measurements
  at different frequencies.
  A Bode plot can then be made which is a plot of gain versus frequency.
  The plot is actually two plots: one for the magnitude of the gain and one
  for the phase of the gain.
  The transfer function we are measuring here is the open loop gain of the
  sensing, feedback, and actuation gain $H$ (the lower right loop) times the
  closed loop gain of the optical spring,
  \begin{equation}
  \mathrm{G} = \frac{H}{1-K_{OS}/m\omega^2}
  \end{equation}
  }
\label{fig:results:servoloop}
\end{figure}

\section{Stability}

I will review the important points of the optical spring theory.
As a reminder, a single optical spring has a delayed response in the cavity
which causes it to be unstable.
The first thought is why? Why does that make it unstable?

One way to visualize this is that we have a system that, without the delay,
the force is maximum when the length is minimum.
This is a critical point to be at because the energy that you put into the
system is balanced, Work $=$ Force $\times$ Distance.
In this case as the cavity shortens, a force is applied in the opposite
direction.
As the cavity lengthens, a force is applied in the same direction as the motion.
And the total work done over each cycle is zero.
With a positive delay, the force applied while the cavity is lengthening is
greater than when it is shortening which makes the total work per cycle greater
than zero.
We're adding energy to the system, making it unstable.
This is only strictly valid at one instant in time because we are leaving out
the effect that the force has on the motion of the mirror.

We can aid the visualization with the following thought experiment.
We attach a device that requires the mirror to follow a
sinusoidal motion at a specific amplitude and frequency regardless of external
forces and place it in a cavity to form an optical spring where the absolute
value of the spring constant is $m\omega_0^2$ where $m$ is the mass of the
optic\footnote{The imaginary device is massless of course.} and $\omega_0$
is the angular frequency the device is following.
Work would be done on the optic by the spring and taken up by the special device.
%In fact, assuming zero friction, the energy going into the device could be
%converted to lighting a bulb for instance.
Of course there's no magic here, the energy comes from the power delivered by
the laser.
Without the device to take up the energy the spring is delivering to
the optic, the energy must go into the motion of the optic where the total
energy is related to the motion by,
\begin{equation}
E = \frac{1}{2}kx^2 \;,
\end{equation}
where $k$ is the spring constant and $x$ is the amplitude of the motion.
Plots of the power from stable and unstable springs are shown in figure
\ref{fig:otstabletime}.

We can also solve the equations of motion,
\begin{align*}
F = ma &= -kx \\
  m\ddot x &= -kx\;.
\end{align*}
The solution to this is harmonic motion of the form,
\begin{align*}
x = Ae^{i\sqrt{k/m}t} + Be^{-i\sqrt{k/m}t} \;.
\end{align*}
I will take $B$ to be $0$. This sets the initial condition, which in the
end can be free again by multiplying by a phase factor $e^{i\theta}$.
Motion in the real world is real, so we always take the real part of the
complex motion when we're done. The imaginary part is just a mathematical
construct that helps with the calculations.

We can damp the system in way similar to what was discussed in section
\ref{sec:II}. I will leave out the velocity term from equation
\ref{eqn:motion} and instead use a complex $k$ for the damping.
This is the same thing as having a viscosity coefficient $b$ with a $f^{-1}$
frequency dependence.
Allowing k to be a complex number, $k = k_0(1+i\phi)$,
we can see readily that this corresponds to a transfer function $-k$ which
shifts the wave in time like we see in figure \ref{fig:otstabletime}.
For $\phi \ll 1$ we can write $k=k_0e^{i\phi}$,
\begin{align}
x &= -kAe^{i\omega t} \nonumber \\
  &= -k_0e^{i(\omega t + \phi)} \nonumber \\
  &= -k_0e^{i\omega(t + \phi/\omega)} \;.
\end{align}
Comparing to the plots in fig. \ref{fig:otstabletime} we can see that with a
small positive $\phi$ we have a spring that is taking energy from the motion
of the mass. A small negative $\phi$ puts energy into the motion of the mass
making it unstable.
%If we were to have $A=0$ instead, the equivalent $k$ would be $k=k_0e^{-i\phi}$.
%In fact if we wanted to keep $A$ and $B$ the entire way, we could but it
%requires us to express the equations of motion with two dimensions,
%\begin{equation}
%\left( \begin{array}{cc} m & 0 \\ 0 & m \end{array} \right)
%  \left( \begin{array}{c} e^{i\omega t} \\ e^{-i\omega t} \end{array} \right)
%  = - \left( \begin{array}{cc} k_0e^{i\phi} & 0 \\ 0 & k_0e^{-i\phi} \end{array} \right)
%  \left( \begin{array}{c} e^{i\omega t} \\ e^{-i\omega t} \end{array} \right) \;.
%\end{equation}


%\begin{align}
%x &= Ae^{i\sqrt{k_0e^{i\phi}/m}t} \nonumber \\
%  &= Ae^{ie^{i\phi/2}\sqrt{k_0/m}t} \;.
%\end{align}
%Then, assuming $\phi$ is small, we'll set $\omega_0=\sqrt{k_0/m}$,
%\begin{align}
%x &= Ae^{i(1+i\phi/2)\omega_0t} + Be^{-i(1+i\phi/2)\omega_0t} \nonumber \\
%  &= Ae^{i\omega_0t}e^{\frac{-\phi}{2}\omega_0t} +
%    Be^{-i\omega_0t}e^{\frac{\phi}{2}\omega_0t} \nonumber \\
%  &= Ae^{i\omega_0t}e^{\frac{-\phi}{2}\omega_0t} +
%    Be^{-i\omega_0t}e^{\frac{\phi}{2}\omega_0t} \;.
%\end{align}

Looking at the transfer function of the closed loop,
\begin{align}
\mathrm{CLG} &= \frac{1}{1-\frac{k_0(1+i\phi)}{m\omega^2}} \nonumber \\
  &= \frac{m\omega^2}{m\omega^2-k_0(1+i\phi)} \;,
\end{align}
when the frequency is such that $m\omega^2 = k_0$,
the closed loop gain looks like,
\begin{align}
&\frac{im\omega^2}{\phi} \nonumber \\
=&\frac{m\omega^2}{\phi}e^{i\pi/2} \;.
\end{align}
For a positive $\phi$, the phase of the transfer function goes through $\pi/2$
at the resonant frequency.
Conversely for the negative $\phi$, the phase goes through $-\pi/2$.
For the pure closed loop gain of a spring we see that the phase must be $-\pi$
below the resonant frequency and $0$ above the resonant frequency.
Therefore, for the case of the stable spring $\phi>0$, we see that the phase of
the transfer must decrease as the frequency increases through the resonance.
For the unstable spring $\phi<0$ the phase will increase over the resonance.
This can be seen in figure \ref{fig:dampedspringtf}.

Now, in our case, the measurement isn't the pure closed loop gain of the
optical spring.
We are actually measuring this closed loop gain times the gain of the feedback
loop.
The result is that the characteristic shape of the falling phase over the
resonance preserved.
This can be seen by writing the complex gains with exponential functions to
generate the imaginary parts,
\begin{align}
FG &= F_0e^{i\theta_1}G_0e^{i\theta_2} \nonumber \\
  &= F_0G_0e^{i(\theta_1+\theta_2)} \;.
\end{align}
Knowing $\theta_1$ we can subtract it from the measured phase. I will actually
present the results as they were measured and compare with the
theoretical plot of the transfer function including both the optical spring
closed loop transfer function and the feedback transfer function.

\begin{figure}
\centering
\tikzsetnextfilename{OT_stable_time}
\begin{tikzpicture}
  \begin{axis}[
    name=plot1,
    height=6cm,
    ymax=2.5,
    xlabel={$\mathrm{Time} [\mathrm{s}]$},
    ylabel={$\mathrm{Amplitude [1]}$},
    legend cell align=left,
    legend style={font=\scriptsize},
    grid=major,
    ]
  \addplot[very thick,samples=200,domain=-3:3,blue!80!black] {sin(x*360)};
  \addlegendentry{$\sin (2\pi ft)$};
  \addplot[very thick,samples=200,domain=-3:3,red!80!black] {-sin((x+0.1)*360)};
  \addlegendentry{$-\sin (2\pi f(t + 0.1))$};
  \addplot[very thick,samples=200,domain=-3:3,green!80!black] {-cos(x*360)*sin((x+0.1)*360)};
  \addlegendentry{$-\cos(2\pi ft) \sin (2\pi f(t+0.1))$};
  \end{axis}
  \begin{axis}[
    name=plot2,
    at=(plot1.below south), anchor=above north,
    height=6cm,
    ymax=2.5,
    xlabel={$\mathrm{Time} [\mathrm{s}]$},
    ylabel={$\mathrm{Amplitude [1]}$},
    legend cell align=left,
    legend style={font=\scriptsize},
    grid=major,
    ]
  \addplot[very thick,samples=200,domain=-3:3,blue!80!black] {sin(x*360)};
  \addlegendentry{$\sin (2\pi ft)$};
  \addplot[very thick,samples=200,domain=-3:3,red!80!black] {-sin((x-0.1)*360)};
  \addlegendentry{$-\sin (2\pi f(t - 0.1))$};
  \addplot[very thick,samples=200,domain=-3:3,green!80!black] {-cos(x*360)*sin((x-0.1)*360)};
  \addlegendentry{$-\cos(2\pi ft) \sin (2\pi f(t-0.1))$};
  \end{axis}
\end{tikzpicture}
\caption[Damped Spring Energy Flow]{This shows the power being delivered to a mass
  attached to a spring where a device keeps the motion of the mass at a fixed
  frequency and amplitude as given by the blue trace.
  This device is simply provided as a tool for this thought experiment and is
  not an actual device we use in the lab experiment.
  The spring applies a force (red trace) opposite to the displacement of the mass
  from equilibrium but with a time shift.
  The green trace is the power delivered to the mass by the spring.
  From the upper plot you can see that the spring is actually taking energy out
  of the system.
  In the lower plot the spring is providing energy to the system.
  In both cases, since we have our special device to keep the motion constant,
  the energy flows into and out of this device.
  An ordinary spring does not provide a continuous energy source but it can take
  energy out of the system in the form of friction.
  Our optical spring on the other hand has a continuous energy source from the
  laser itself.
  The difference in power is applied to the total of the reflected and
  transmitted beams from the cavity.
  }
\label{fig:otstabletime}
\end{figure}

\begin{figure}
\centering
\tikzsetnextfilename{dampedTF}
\begin{tikzpicture}
  \begin{loglogaxis}[
    name=plot1,
    height=6cm,
%    xlabel={$\mathrm{Frequency} [\mathrm{Hz}]$},
    ylabel={$\mathrm{Magnitude}$},
    legend cell align=left,
    legend style={font=\scriptsize},
    grid=major,
    ]
    \addplot[blue,very thick] table[x index=0,y index=1]
      {./matlab_traces/damposcmag.dat};
    \addlegendentry{$\phi = +0.05$};
    \addplot[red,very thick] table[x index=0,y index=2]
      {./matlab_traces/damposcmag.dat};
    \addlegendentry{$\phi = +0.1$};
    \addplot[green,dashed,very thick] table[x index=0,y index=3]
      {./matlab_traces/damposcmag.dat};
    \addlegendentry{$\phi = -0.05$};
    \addplot[yellow,dashed,very thick] table[x index=0,y index=4]
      {./matlab_traces/damposcmag.dat};
    \addlegendentry{$\phi = -0.1$};
  \end{loglogaxis}
  \begin{semilogxaxis}[
    name=plot2,
    at=(plot1.below south), anchor=above north,
    height=6cm,
    xlabel={$\mathrm{Frequency} [\mathrm{Hz}]$},
    ylabel={$\mathrm{Phase [Deg]}$},
    legend cell align=left,
    legend style={font=\scriptsize},
    grid=major,
    ]
    \addplot[blue!80!black,very thick] table[x index=0,y index=1]
      {./matlab_traces/damposcphase.dat};
    \addplot[red!80!black,very thick] table[x index=0,y index=2]
      {./matlab_traces/damposcphase.dat};
    \addplot[green!80!black,dashed,very thick] table[x index=0,y index=3]
      {./matlab_traces/damposcphase.dat};
    \addplot[yellow!80!black,dashed,very thick] table[x index=0,y index=4]
      {./matlab_traces/damposcphase.dat};
%    \addplot[very thick,smooth,samples=2000,domain=1:100,blue!80!black]
%      {atan(100*0.05/(x^2-100))};
%      {1/sqrt((1-100/x^2)^2+(100/x^2*0.05)^2)};
%    \addlegendentry{OLG};
%    \addplot[very thick,smooth,samples=2000,domain=1:100,red!80!black]
%      {atan(100*0.1/(x^2-100))};
%      {1/sqrt((1-100/x^2)^2+(100/x^2*0.1)^2)};
%    \addlegendentry{OLG};
  \end{semilogxaxis}
\end{tikzpicture}
\caption[Damped Spring Closed Loop Gain]{This shows the damped spring closed
  loop gain behavior.
  The two solid lines are examples of stable springs ($\phi>0$).
  The two dashed lines are unstable springs.
  The signature we look for to verify stability of the optical spring is
  the direction the phase goes from 180 to 0 degrees.
  Decreasing phase over the resonant frequency indicates a stable spring, while
  the unstable spring has the opposite behavior.
  Notice that the stability cannot be determined from the magnitude plot.
  Positive and negative $\phi$ look exactly the same.
  }
\label{fig:dampedspringtf}
\end{figure}



\section{Measurements}

Linear trap measurements have been taken twice.
The first measurement was with the subcarrier at the same offset frequency from
the carrier for each measurement.
The results generally were in line with the theory, however there were
complications from the layout which needed to be addressed.

\section{First Experiment}

%\begin{figure}[htbp]
%    \centering
%    \includegraphics[width=20cm]{./figures/april_results_olgfit.eps}
%    \caption[Data Fitting of Open Loop Gain for 1st Results]{This is the open
%        loop gain fit of the last 7 measurements taken during a segment of
%        time in which the cavity was continuously locked.
%        The trap cavity had been locked for a few hours at this point and
%        seemed to have stabilized compared to earlier in the lock segment.
%        These measurements were taken no more than 5 minutes apart from each
%        other so the effects of any drifted were minimized.}
%    \label{fig:olgapril}
%\end{figure}

The first set of measurements seemed to have a large drift in the resonant
frequency.
One of the reasons for this is the fact that the carrier beam was not
well aligned to the subcarrier beam causing drifts in the power ratio between
carrier and subcarrier as the overall alignment drifted.
Another complication in the first run was due to the fact that the carrier and
subcarrier beams had exactly the same polarizations which caused a strong
beat signal at 355kHz. This beat signal was low enough in frequency that
it would show strongly in the resonant \ac{rfpd} output, likely causing
saturation effects in the electronics that would lead to an unpredictable
subcarrier detuning.
The effect of carrier and subcarrier beating will be discussed further in
section \ref{sec:expimps}

Despite these issues we were clearly able to observe
stable and unstable optical springs and there was a short stretch of
measurements that did line up with the model with certain assumptions
about the parameter space.


\begin{figure}
  \label{fig:april_space1}
  \tikzsetnextfilename{april_space1}
  \begin{tikzpicture}
  \begin{axis}[
    name=plot1,
    height=8cm,
    width=14cm,
    ylabel={Resonant Frequency $\left[\mathrm{Hz}\right]$ },
    xlabel={Subcarrier Detuning $\left[\mathrm{kHz}\right]$},
    grid=major,
  ]
  \addplot[blue,very thick] table[x index=1,y index=2]
    {./matlab_traces/april_fitspace_stable.dat};
  \addplot[green,very thick] table[x index=1,y index=2]
    {./matlab_traces/april_fitspace_unstable.dat};
  \addplot[blue,only marks] table[x index=1,y index=2]
    {./matlab_traces/april_pointspace_stable.dat};
  \addplot[green,only marks] table[x index=1,y index=2]
    {./matlab_traces/april_pointspace_unstable.dat};
  \end{axis}
  \end{tikzpicture}
    \caption[Parameters from 1st Experiment]{
      The solid lines show the theoretical
      spring frequencies for all of the measurements that took place in a span
      of about 30 minutes during the first experiment at the end of one lock
      stretch.
      The dots correspond to the actual measurements of the optical spring at
      different subcarrier detunings. The entire space depicted is in the region
      of static stability, i.e. the optical spring provides a restoring force.
      The colors correspond to the dynamic stability of the optical spring.
      Blue is dynamically stable.
      Green is dynamically unstable.
      The carrier frequency remained at a fixed offset from the subcarrier at
      355 kHz.
      The fitting for this plot was done by plotting the actual measured
      resonant frequency vs. the error point offset in mV.
      The theoretical curve was transformed to match the axes using the
      \ac{pdh} transformation shown in figure \ref{fig:pdh}.
      I could then fit the curve using four parameters:
      finesse, total power, error point voltage offset,
      and carrier to subcarrier power ratio.
      The parameters used in this plot are:
      $\mathcal{F}=8000$, power ratio$=1.5$, total power$=344.7\mathrm{mW}$,
      error point offset$=-670\mathrm{mV}=-19.07\mathrm{kHz}$.
      This does not include any effect due to the thermal expansion of the
      optics mentioned in section \ref{sec:opticthermalexpansion}.
      }
\end{figure}

\begin{figure}
  \label{fig:april_olg1}
  \tikzsetnextfilename{april_olg1}
  \begin{tikzpicture}
  \begin{semilogyaxis}[
    name=plot1,
    height=5cm,
    width=7cm,
    xmin=760,
    xmax=880,
    ylabel={Magnitude},
    grid=major,
  ]
  \addplot[blue,very thick] table[x index=0,y index=1] {./matlab_traces/april_olg_38.dat};
  \addplot[blue] table[x index=0,y index=1] {./matlab_traces/april_fit.dat};
  \addplot[red,very thick] table[x index=0,y index=1] {./matlab_traces/april_olg_39.dat};
  \addplot[red] table[x index=0,y index=3] {./matlab_traces/april_fit.dat};
  \addplot[green,very thick] table[x index=0,y index=1] {./matlab_traces/april_olg_40.dat};
  \addplot[green] table[x index=0,y index=5] {./matlab_traces/april_fit.dat};
  \end{semilogyaxis}


  \begin{axis}[
    name=plot3,
    at=(plot1.below south), anchor=north,
    height=5cm,
    width=7cm,
    xmin=760,
    xmax=880,
    xlabel={Frequency $\left[\mathrm{Hz}\right]$},
    ylabel={Phase},
    grid=major,
  ]
  \addplot[blue,very thick] table[x index=0,y index=2] {./matlab_traces/april_olg_38.dat};
  \addplot[blue] table[x index=0,y index=2] {./matlab_traces/april_fit.dat};
  \addplot[red,very thick] table[x index=0,y index=2] {./matlab_traces/april_olg_39.dat};
  \addplot[red] table[x index=0,y index=4] {./matlab_traces/april_fit.dat};
  \addplot[green,very thick] table[x index=0,y index=2] {./matlab_traces/april_olg_40.dat};
  \addplot[green] table[x index=0,y index=6] {./matlab_traces/april_fit.dat};
  \end{axis}
  \begin{axis}[
    name=plot4,
    at=(plot3.east), anchor=left of west,
    height=5cm,
    width=7cm,
    xmin=760,
    xmax=880,
    xlabel={Frequency $\left[\mathrm{Hz}\right]$},
    ylabel={Phase},
    grid=major,
  ]
  \addplot[blue,very thick] table[x index=0,y index=2] {./matlab_traces/april_olg_41.dat};
  \addplot[blue] table[x index=0,y index=8] {./matlab_traces/april_fit.dat};
  \addplot[red,very thick] table[x index=0,y index=2] {./matlab_traces/april_olg_42.dat};
  \addplot[red] table[x index=0,y index=10] {./matlab_traces/april_fit.dat};
  \addplot[green,very thick] table[x index=0,y index=2] {./matlab_traces/april_olg_43.dat};
  \addplot[green] table[x index=0,y index=12] {./matlab_traces/april_fit.dat};
  \addplot[black,very thick] table[x index=0,y index=2] {./matlab_traces/april_olg_44.dat};
  \addplot[black] table[x index=0,y index=14] {./matlab_traces/april_fit.dat};
  \end{axis}

  \begin{semilogyaxis}[
    name=plot2,
    at=(plot4.north), anchor=below south,
    height=5cm,
    width=7cm,
    xmin=760,
    xmax=880,
    ylabel={Magnitude},
    grid=major,
  ]
  \addplot[blue,very thick] table[x index=0,y index=1] {./matlab_traces/april_olg_41.dat};
  \addplot[blue] table[x index=0,y index=7] {./matlab_traces/april_fit.dat};
  \addplot[red,very thick] table[x index=0,y index=1] {./matlab_traces/april_olg_42.dat};
  \addplot[red] table[x index=0,y index=9] {./matlab_traces/april_fit.dat};
  \addplot[green,very thick] table[x index=0,y index=1] {./matlab_traces/april_olg_43.dat};
  \addplot[green] table[x index=0,y index=11] {./matlab_traces/april_fit.dat};
  \addplot[black,very thick] table[x index=0,y index=1] {./matlab_traces/april_olg_44.dat};
  \addplot[black] table[x index=0,y index=13] {./matlab_traces/april_fit.dat};
  \end{semilogyaxis}

  \end{tikzpicture}
    \caption[Data Fitting of Open Loop Gain for 1st Results]{This is the open
        loop gain fit of the last 7 measurements taken during a segment of
        time in which the cavity was continuously locked.
        The three traces in the top two plots are of the stable spring with
        a large negative detuning.
        They correspond to the three blue dots from figure
        \ref{fig:april_space1} with the most negative subcarrier detuning.
        The thick traces in all plots are from the measurements in the lab.
        The thin traces are of the modelled open loop gain.
        The trap cavity had been locked for a few hours at this point and
        seemed to have stabilized compared to earlier in the lock segment.
        These measurements were taken no more than 5 minutes apart from each
        other so the effects of any drifting were minimized.}
  \label{fig:aprilolg1}
\end{figure}


\section{Experimental Layout Revision}
\label{sec:expimps}
From our first layout design there was a rather
large beat signal on the \ac{rfpd} used for generating the \ac{pdh} signal
for our locking feedback servo.
This beat signal is a result of our initial layout involving the combining of
carrier and subcarrier beams before a \ac{fi} which resulted in the two beams
having the same polarization.
This produces a beat signal of the difference in the two frequencies.
The beat signal shows up in our resonant \ac{rfpd} because we use a small
frequency offset between the two beams. An offset of 355kHz has a gain of
-3dBc for one sideband and -1dBc for the other.

We observed that, with the power on the \ac{rfpd} at the nominal value to give
us a 20kHz unity gain frequency, the signal directly from the \ac{rfpd} was
nearly the $\pm 5\mathrm{V}$ of the supply voltage to the op-amp.
By varying the power onto the \ac{rfpd} we could see that the signal in
fact did not get much larger and seemed to be at point where the size of the
beat signal did not increase at the same rate as the overall power.

Saturations in the electronics can cause unpredictable electronic
offsets in the trap locking feedback servo
resulting in an error on the subcarrier detuning lock point.
We solved this problem by using a \ac{pbs} cube to combine the two beams
instead of a non-polarizing beamsplitter.
The carrier polarization was set to s and the subcarrier polarization to p.
We made the beams incident to the \ac{pbs} cube such that the carrier was
reflected along the path of the transmitted subcarrier beam.
The resulting combination of orthogonally polarized beams was propagated
to experiment.
An added benefit was that we could combine the beams with little loss of
power.

A quarter wave-plate was needed in the combined path due to some ellipticity
in the reflected beam.
This is apparently from birefringence in the window to the vacuum chamber.
The birefringence causes a phase delay in one linear polarization of light
with respect to it's orthogonal counterpart.
If there is only one birefringent optic in the path we could use a
half wave-plate and simply rotate the orthogonal beams so they align with
the fast and slow axes of the birefringent material.
The quarter wave-plate solves this with an added benefit of having the
flexibility to rearrange the return beams. One could direct the carrier
back along the subcarrier and vice-versa, for instance.

Additional improvements included several things to make the experiment easier.
We added a camera to look at the reflected beam which helped with alignment.

We also added some polarization cubes to take advantage of the orthogonal
polarizations and monitor the two beams independently.

Aligning the beam to the cavity using the steering mirrors on table 2 was very
difficult because the cavity mirrors could get excited quite easily from
touching the table.
So we added steering mirrors on table 1 after the carrier and subcarrier
beams are combined. This allowed us to compensate for drifts in alignment
between the two tables without having to touch table 2.
The new layout can be seen in figure \ref{fig:newinput}.

\begin{figure}
\centering
  \includegraphics[width=15cm]{./figures/newinput.pdf}
  \caption[Table 1 Input Optics]{Table 1 Input Optics}
  \label{fig:newinput}
\end{figure}

\subsection{Faraday Isolator}
The Faraday isolator is composed of a Faraday rotator and two \ac{pbs} cubes.
The Faraday rotator is a medium which in the presence of a magnetic field
will rotate the polarization of light as it propagates through the medium.
There are other, much simpler devices that can rotate the polarization.
However, the advantage of the \ac{fi} is that it will rotate the polarization
in a fixed direction relative to the lab and not relative to the direction
of propagation.

In the case of the Faraday isolator, the polarization is rotated by 45 degrees
so that any reflected light comes back through the \ac{fi} with a 90 degree
rotation.
The isolation is then done by adding a \ac{pbs} cube at the input to the
Faraday rotator. Then we also add one on the output because there will often be
additional optics that will disturb the polarization of the reflected light
entering the \ac{fi} from the output side.
Another way of putting it is that the \ac{pbs} on the input side transmits
only the linear polarization that will transmit through the output \ac{pbs}.
The output \ac{pbs} transmits only the linear polarization that will be
reflected by the input \ac{pbs}.


\section{Second Experiment}

During the second experiment we were able to observe several stable and
unstable spring as before. This time we varied the frequency offset between
carrier and subcarrier for each measurement, keeping the other settings
fixed.

We ran into some complications while fitting the data.
The stability of the optical springs would not match with the theory without
the addition of some extra physics.
With the addition of an effect from the thermal expansion of the high
reflective optical coatings, we were able to fit the stablility
properly.

Thermal expansion couples in to the transfer function by the fact that driving
the position of the mirror causes a power fluctuation and thus a temperature
fluctuation in the surface of the mirror due to absorption.
This temperature fluctuation causes a fluctuation in the thickness
of the optic.
This will be expained in more detail in section
\ref{sec:opticthermalexpansion}.
It turns out that only 5ppm absorption is required to account for the
discrepancy in stablility.
This is, in part, due to the high circulating power and the small
beam spot size on the cavity end mirrors.
The results of this fitting can be seen in figure \ref{fig:juneOLGresults}.

\subsection{Optic Thermal Expansion Contribution}
\label{sec:opticthermalexpansion}
See section 2.8.5 of Stefan Ballmer's thesis  \cite{Ballmer:thesis} for
a thorough discussion on thermal expansion to cavity lenght couplings.
The relevant part that we are interested in is the effect of changing
the thickness of the optic itself due to thermal expansion.
We want to first consider the penetration depth $d$ of the thermal
fluctuations. This is given by,
\begin{align}
\label{eq:pendepth}
d &= \sqrt{\frac{\kappa}{2\pi fC\rho}} = 18.4 \mathrm{\mu m}
     \sqrt{\frac{400 \mathrm{Hz}}{f}} \,.
\end{align}
I have written the equation in this form to illustrate that at the lower
optical spring frequencies from the experiment, we have a maximum penetration
depth of about $18\mathrm{\mu m}$.
This is nearly an order of magnitude smaller than the beam spot diameter, which
is about $320\mu m$. The change in thickness $\Delta_z$ of the optic can then
be approximated with
\begin{equation} \label{eq:deltaz}
\Delta_z = \left(1+\eta\right)\alpha\frac{ \delta P }{2\pi ifC\rho A} \, ,
\end{equation}
where $\delta$ is the absorption coefficient, $A$ is the area of the beam,
and $\eta$ is the Poisson ratio.

From equation \ref{eq:deltaz} we can get the transfer function from force to
traplength. With a factor of $c/2$ to remove the optical power to force from
the optical spring $K_{OS}$, the transfer function depicted in figure
\ref{fig:traploopCTE} is
\begin{equation}
\frac{-c \delta \alpha \left(1+\eta\right)}{4\pi ifC\rho A} \, .
\end{equation}

The majority of the change in power buildup due to cavity length is due to the
carrier beam which has a positive detuning.
Because of this detuning, expansion of the optics will shorten the cavity and
increase the intracavity power.
The intracavity power fluctuations will thus have a positive feedback and add
to the instability of the optical spring.

\begin{figure}
\centering
\tikzsetnextfilename{traploopCTE}
\begin{tikzpicture}[
  analog/.style={rectangle,draw=blue!50,fill=blue!20,thick,align=center,
    outer sep=0,minimum width=2cm,
    minimum height=1cm,
    text width=1.8cm},
  digital/.style={rectangle,draw=black!50,fill=black!20,thick,align=center,
    outer sep=0,minimum width=2cm,
     minimum height=1cm,
    text width=1.8cm},
  physical/.style={rectangle,draw=green!50,fill=green!20,thick,align=center,
    outer sep=0,minimum width=2cm,
    minimum height=1cm,
    text width=1.8cm},
  optical/.style={rectangle,draw=red!50,fill=red!20,thick,align=center,
    outer sep=0,minimum width=2cm,
    minimum height=1cm,
    text width=1.8cm}]
  \renewcommand{\baselinestretch}{0.9}
  \begin{scriptsize}
  \node[circle,draw=black] (sum1) at (-3,-1.5) {$+$};
  \node[circle,draw=black] (sum2) at (3,0) {$+$};
  \node[analog] (F) at (0,-3) {Active Feedback};
  \node[optical] (O) at (0,-1.5) {Optical Spring};
  \node[physical] (S) at (0,1.5) {Small Mass Suspension};
  \node[physical] (CTE) at (0,0) {Thermal Optic Expansion};
  \coordinate (j1) at (-3,-3) {};
  \coordinate (j2) at (-3,-1.5) {};
  \coordinate (j3) at (-3,0) {};
  \coordinate (j4) at (-3,1.5) {};
  \coordinate (j5) at (3,-3) {};
  \coordinate (j6) at (3,-1.5) {};
  \coordinate (j7) at (3,0) {};
  \coordinate (j8) at (3,1.5) {};
  \draw[thick] (F) -- (j1);
  \draw[thick,->] (O) -- (sum1);
  \draw[thick,->] (j3) -- (CTE);
  \draw[thick,->] (j4) -- (S);
  \draw[thick,->] (j1) -- (sum1);
  \draw[thick] (sum1) -- (j3);
  \draw[thick] (j3) -- (j4);
  \draw[thick,<-] (F) -- (j5);
  \draw[thick,<-] (O) -- (j6);
  \draw[thick,<-] (sum2) -- (CTE);
  \draw[thick] (j8) -- (S);
  \draw[thick] (j5) -- (j6);
  \draw[thick] (j6) -- (sum2);
  \draw[thick,<-] (sum2) -- (j8);
  \node[rotate=45] (force) at (-6,0) {\LARGE FORCE};
  \node[rotate=45] (pos) at (6,0) {\LARGE POSITION};
  \end{scriptsize}
\end{tikzpicture}
  \caption[Trap Loop With Optic Thermal Expansion]{
    This shows how the thermal expansion effect couples into the experiment.
    Active feedback represents the two feedback paths displayed in figure
    \ref{fig:traploops}.
    }
  \label{fig:traploopCTE}
\end{figure}


\begin{figure}
  \tikzsetnextfilename{juneOLGresults}
  \begin{tikzpicture}
  \begin{loglogaxis}[
    name=plot1,
    height=7cm,
    width=14cm,
    xmin=100,
    xmax=2000,
    xtick={1e2,1e3},
    ylabel={Magnitude},
    grid=both,
  ]
  \addplot[blue,very thick,smooth,dashed] table[x index=0,y index=1]
    {./matlab_traces/juneResults13fit.dat};
  \addplot[green,very thick,smooth,dashed] table[x index=0,y index=1]
    {./matlab_traces/juneResults20fit.dat};
  \addplot[red,very thick,smooth,dashed] table[x index=0,y index=1]
    {./matlab_traces/juneResults10fit.dat};
  \addplot[teal,very thick,smooth,dashed] table[x index=0,y index=1]
    {./matlab_traces/juneResults15fit.dat};
  \addplot[magenta,very thick,smooth,dashed] table[x index=0,y index=1]
    {./matlab_traces/juneResults18fit.dat};
  \addplot[yellow,very thick,smooth,dashed] table[x index=0,y index=1]
    {./matlab_traces/juneResults19fit.dat};
  \addplot[blue,very thick,smooth] table[x index=0,y index=1] {./matlab_traces/juneResults13.dat};
  \addplot[green,very thick,smooth] table[x index=0,y index=1] {./matlab_traces/juneResults20.dat};
  \addplot[red,very thick,smooth] table[x index=0,y index=1] {./matlab_traces/juneResults10.dat};
  \addplot[teal,very thick,smooth] table[x index=0,y index=1] {./matlab_traces/juneResults15.dat};
  \addplot[magenta,very thick,smooth] table[x index=0,y index=1] {./matlab_traces/juneResults18.dat};
  \addplot[yellow,very thick,smooth] table[x index=0,y index=1] {./matlab_traces/juneResults19.dat};
  \end{loglogaxis}
  \begin{semilogxaxis}[
    name=plot2,
    at=(plot1.below south), anchor=above north,
    height=7cm,
    width=14cm,
    xmin=100,
    xmax=2000,
    xtick={1e2,1e3},
    xlabel={Frequency [Hz]},
    ylabel={Phase [Deg]},
    legend style={legend pos=north west,font=\tiny},
    grid=both,
  ]
  \addplot[blue,very thick,dashed,forget plot] table[x index=0,y index=2]
    {./matlab_traces/juneResults13fit.dat};
  \addplot[green,very thick,dashed,forget plot] table[x index=0,y index=2]
    {./matlab_traces/juneResults20fit.dat};
  \addplot[red,very thick,dashed,forget plot] table[x index=0,y index=2]
    {./matlab_traces/juneResults10fit.dat};
  \addplot[teal,very thick,dashed,forget plot] table[x index=0,y index=2]
    {./matlab_traces/juneResults15fit.dat};
  \addplot[magenta,very thick,dashed,forget plot] table[x index=0,y index=2]
    {./matlab_traces/juneResults18fit.dat};
  \addplot[yellow,very thick,dashed,forget plot] table[x index=0,y index=2]
    {./matlab_traces/juneResults19fit.dat};
  \addplot[blue,very thick] table[x index=0,y index=2] {./matlab_traces/juneResults13.dat};
  \addlegendentry{DetC=290.8kHz,DetS=-39.2kHz,Pratio=3.46}
  \addplot[green,very thick] table[x index=0,y index=2] {./matlab_traces/juneResults20.dat};
  \addlegendentry{DetC=285.0kHz,DetS=-45.0kHz,Pratio=3.96}
  \addplot[red,very thick] table[x index=0,y index=2] {./matlab_traces/juneResults10.dat};
  \addlegendentry{DetC=285.1kHz,DetS=-34.9kHz,Pratio=3.50}
  \addplot[teal,very thick] table[x index=0,y index=2] {./matlab_traces/juneResults15.dat};
  \addlegendentry{DetC=264.2kHz,DetS=-35.8kHz,Pratio=3.94}
  \addplot[magenta,very thick] table[x index=0,y index=2] {./matlab_traces/juneResults18.dat};
  \addlegendentry{DetC=238.2kHz,DetS=-21.8kHz,Pratio=4.27}
  \addplot[yellow,very thick] table[x index=0,y index=2] {./matlab_traces/juneResults19.dat};
  \addlegendentry{DetC=222.5kHz,DetS=-17.5kHz,Pratio=4.42}
  \end{semilogxaxis}
  \end{tikzpicture}
    \caption[Data Fitting of Open Loop Gain for 1st Results]{This is the open
      loop gain fit for the second experiment. The solid lines are the measured
      optical spring transfer functions. The dashed lines are the corresponding
      theoretical transfer functions. In the legend, "DetC" and "DetS" stand for
      carrier and subcarrier detuning respectively. Pratio is the power ratio
      of carrier to subcarrier input power.}
  \label{fig:juneOLGresults}
\end{figure}


\begin{figure}
  \tikzsetnextfilename{noisepassive}
  \begin{tikzpicture}
  \begin{loglogaxis}[
    height=12cm,
    width=14cm,
    xlabel={Frequency $\left[\mathrm{Hz}\right]$},
    ylabel={Trap Length Noise $\left[\mathrm{m}/\sqrt{\mathrm{Hz}}\right]$},
    xmin=10,
    xmax=6000,
    ymin=1e-16,
    ymax=1e-8,
    grid=major,
    legend cell align=left,
  ]
  \addplot[blue,very thick,smooth] table[x index=0,y index=1]
    {./matlab_traces/june_noises.dat};
  \addlegendentry{Measured Trap Length Noise}
  \addplot[red,very thick,smooth] table[x index=0,y index=5]
    {./matlab_traces/june_noises.dat};
  \addlegendentry{Trap Length Noise Without Active Feedback}
  \addplot[red,dashed,very thick,smooth] table[x index=0,y index=6]
    {./matlab_traces/june_noises.dat};
  \addlegendentry{Trap Length RMS Without Active Feedback}
  \end{loglogaxis}
  \end{tikzpicture}
    \caption[Estimate of Passively Attenuated Noise]{
    This is the noise budget which includes the measured
    cavity length noise with a stable optical spring.
    }
  \label{fig:noisepassive}
\end{figure}


